{% load static %}
{% block head %}
<head>
    <style>

        :root {
            --page-color: rgb(61, 61, 145);
        }
        
        /* CONTAINER */
        #parent
        {
            display: grid;
            grid-template-columns: auto;
            row-gap: 2%;
            margin: 3% 17% 3% 17%;
            border-radius: 1%;
            /* border: 3px solid red; */
            width: 60%;
        }

        /* SEPARATOR */
        .section_separator
        {
            background:linear-gradient(to right, var(--page-color) 0% 40% , white 40% 60% , var(--page-color) 60% 100%);
            height: 85%;
            text-align: center;
            font-size: 150%;
            font-weight: 900;
        }

        /* NAME */
        #section_name
        {
            text-align: center;
        }

        /* INFORMATION */
        #section_information
        {
            display: grid;
            grid-template-columns: 34% 33% 33%;
            column-gap: 3%;
        }

        .information{
            width: 200px;
            text-align: left;
        }

        /* REVIEW */
        #section_review
        {
            text-align: center;
        }

        /* SCORES */
        #section_scores
        {
            display: grid;
            grid-template-columns: 50% 50%;
            grid-gap: 2px; 
        }

        .score
        {
            width: 300px;
        }

        .feature
        {
            width: 200px;
            text-align: left;
        }

        /* CASTING */
        #section_casting
        {
            display:flex;
            justify-content: space-evenly;
        }

        /* SCENES */
        #section_scenes
        {
            display:flex;
            justify-content: space-evenly;
            column-gap: 5%;
            flex-basis: 50%
        }

        .scenes
        {
            display: flex;
            flex-direction: column;
        }

        /* QUOTES */
        #section_quotes
        {
            display: grid;
            grid-template-columns: 33% 33% 33%;
            grid-gap: 2px;
        
        }

        .quotes
        {
            text-align: center;
            font-family: "Times New Roman", Times, serif;
            font-size:x-large;
            font-weight: 550;
            font-style: oblique;
        }

        .quotes_caption
        {
            text-align: center;
        }

        .icons
        {
            height: 55%;
            width: 20%;
        }

        .general
        {
            width: 50%;
            text-align: center;
        }
    </style>
</head>
{% endblock %}

{% block content %}

<div id = "parent">

    <nav class="menu">
          <a href="{% url 'Movies' %}">Movies</a>
          <a href="{% url 'Directors' %}">Directors</a>
          <a href="{% url 'Actors' %}">Actors</a>
      </nav>

    <div id = "section_name">
         <h1>{{ movie.name }}</h1>
    </div>

    <div class = "section_separator">
        INFORMATION
    </div>
   
    <div id = "section_information">

        <div>
            <table height = 200>
                <tbody>
                    <tr>
                        <td class = "information">Rating</td>
                        <td class = "information_value">PG-13</td>
                    </tr>
                    <tr>
                        <td class = "information">Genre</td>
                        <td class = "information_value">Drama, Mystery & Thriller, Fantasy</td>
                    </tr>
                    <tr>
                        <td class = "information">Original Language:</td>
                        <td class = "information_value">English</td>
                    </tr>
                    <tr>
                        <td class = "information">Director:</td>
                        <td class = "information_value">Christopher Nolan</td>
                    </tr>
                    <tr>
                        <td class = "information">Release Date</td>
                        <td class = "information_value">Oct 20, 2006 </td>
                    </tr>
                    <tr>
                        <td class = "information">Runtime:</td>
                        <td class = "information_value">2h 10m</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div>
            The movie is about the rivalry between two young magicians Robert Angier (Hugh Jackman) and Alfred Borden ( Christian Bale) 
        and it is based on the novel written by Christopher Priest in 1995.Two friends and fellow magicians turn into bitter enemies after a 
        sudden tragedy. As they devote themselves to this rivalry, they make sacrifices that bring them fame but with terrible consequences.
        </div>

        <div style = "align-items: center;">
            <img src="{{ movie.image.url }}" style="width: 80%;height: 240px" >
        </div>

    </div>

    <div class = "section_separator">
        REVIEW
    </div>

    <div id = "section_review">
        If u ask whether this movie worth a watch, I would say not once but twice or even thrice. 
            This story is too complicated so u need to watch it twice to understand it clearly. 
            This is a awesome movie with a fabulous screenplay and I can assure that this film will surprise 
            you with various twists.
    </div>

    <div class = "section_separator">
        SCORES
    </div>

    <div id = "section_scores">

        <div>
            <table height = 200>
                <tbody>
                    <tr>
                        <td class = "feature">Cinematography</td>
                        <td class = "score"></td>
                    </tr>
                    <tr>
                        <td class = "feature">Acting</td>
                        <td class = "score"></td>
                    </tr>
                    <tr>
                        <td class = "feature">Editing</td>
                        <td class = "score"></td>
                    </tr>
                    <tr>
                        <td class = "feature">Custom</td>
                        <td class = "score"></td>
                    </tr>
                    <tr>
                        <td class = "feature">Music</td>
                        <td class = "score"></td>
                    </tr>
                    <tr>
                        <td class = "feature">Screenplay</td>
                        <td class = "score"></td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div>
            <table height = 200>
                <tbody>
                    <tr>
                        <td class = "general">Our Score</td>
                        <td class = "icon_score"></td>
                    </tr>
                    <tr>
                        <td class = "general"><img class = "icons" src = "/media/icons/RottenTomatoesIcon.png"></td>
                        <td class = "icon_score"></td>
                    </tr>
                    <tr>
                        <td class = "general"><img class = "icons" src = "/media/icons/ImdbIcon.png"></td>
                        <td class = "icon_score"></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class = "section_separator">
        CASTING
    </div>

    <div id = "section_casting">
        {% for actor in movie.actors.all %}
        <div>
            <img src="{{ actor.image.url }}" style="border-radius: 50%;height: 100px;width: 70%;" >
            <figcaption style = "text-align: center;"> {{ actor.name }} </figcaption>
        </div>
        {% endfor %}
    </div>

    <div class = "section_separator">
        SCENES
    </div>

    <div id = "section_scenes">
        <div class = "scenes">
            <img src="{{ movie.scene1.url }}" style="width: 90%; height: 200px;" >
            <figcaption style = "text-align: center;"> {{ movie.scene1_caption }} </figcaption>
        </div>
        <div class = "scenes">
            <img src="{{ movie.scene2.url }}" style="width: 90%;  height: 200px;">
            <figcaption style = "text-align: center;"> {{ movie.scene2_caption }} </figcaption>
        </div>
        <div class = "scenes">
            <img src="{{ movie.scene3.url }}" style="width: 90%;  height: 200px;" >
            <figcaption style = "text-align: center;"> {{ movie.scene3_caption }} </figcaption>
        </div>
    </div>
    
    <div class = "section_separator">
        QUOTES
    </div>

    <div id = "section_quotes">

        <div class = "quotes">{{ movie.quote1 }}</div>
        <div class = "quotes">{{ movie.quote2 }}</div>
        <div class = "quotes">{{ movie.quote3 }}</div>

        <div class = "quotes_caption"> - {{ movie.quote1_character }}</div>
        <div class = "quotes_caption"> - {{ movie.quote2_character }}</div>
        <div class = "quotes_caption"> - {{ movie.quote3_character }}</div>
       
    </div>

    <div class = "section_separator">
        RELATED FILMS
    </div>

    <div id = "section_related">
    </div>
</div>

{% endblock %}

{% block scripts %}

<script src = "{% static 'blog/jquery.js' %}"></script>

{{ movie.scores_json|json_script:'scores_json' }}
{{ movie.icons_scores_json|json_script:'icons_scores_json' }}

<script>

    var score_bar = function(bar_color,column,json_data){

        let features = Object.keys(json_data)

        for (let cell = 0; cell < column.length; cell++ )
        {
            let score = json_data[features[cell]]
            $(column[cell]).append($('<div>'+score+'%</div>')
                                .css({
                                    "border":"1px solid black",
                                    "height":"20px",
                                    "width":"90%",
                                    "margin-left":"5px",
                                    "text-align":"center",
                                    "background":"linear-gradient(to right, "+ bar_color +" 0" + score + "%,white " + score + "% 100%)"
                                })
                                )
        }
    }

    // accesing color of the page
    const page_color = getComputedStyle(document.documentElement).getPropertyValue('--page-color')

    var scores =jQuery.parseJSON($("#scores_json").text());
    var score_column = $(".score")
    
    var icon_scores =jQuery.parseJSON($("#icons_scores_json").text());
    var icon_score_column = $(".icon_score")

    score_bar(page_color,score_column,scores)
    score_bar(page_color,icon_score_column,icon_scores)

</script>
    


{% endblock %}