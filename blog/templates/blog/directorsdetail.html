{% extends "blog/header.html" %}
{% load static %}
{% block styles %}
    
    {{ block.super }}

    <style>

        a{ text-decoration: none;color :black}

        td
        {
            border-top: 1px solid black;
            text-align: center;
            
        }
        td:hover
        {
            background-color: var(--nav-color);
            color: white;
        }

        td a:hover
        {
            background-color: var(--nav-color);
            color: white;
        }

        thead th
        {
            background-color: var(--page-color);
            color: white;
        }

        table { border-spacing:0 }

        #section_information
        {
            display: grid;
            grid-template-columns: 70% 30%;
            column-gap: 3%;
        }
        #right_side {width: 40%;}
        #parent {width: 100%;}
    </style>
{% endblock %}

{% block content %}

<div id = "webpage">
    
    {{ block.super }}

    <div id = "section_name">
        {{ director.name }}
    </div>

    <div id = "page">

        <div id = "right_side">

            <div class = "section_separator">
                MOVIES
            </div>
            <br>
            
        </div>

        <div id = "parent">

            <div class = "section_separator">
                INFORMATION
            </div>
            <br>
        
            <div id = "section_information">

                <div style = "display: flex;align-items: center;">
                    {{ director.review }}
                </div>

                <div class = "images" style = "width: 70%;height: auto">
                    {% if director.image %}
                        <img src="{{ director.image.url }}" style="width: 100%;height:auto">
                    {% else %}
                        <img src="/media/actor_image/ProfilePic.png" style="width: 100%; height: auto">
                    {% endif %}
                    <figcaption style = "text-align: center;"> {{ director.name }} </figcaption>
                </div>
            </div>
            <br>

            <div class = "section_separator">
                MOVIES
            </div>
            <br>
            
            <div>
                <table style = "width: 100%">
                    <thead>
                        <form method = "POST">{% csrf_token %}
                            <th>Year<input name = "Year" type = "checkbox"></th>
                            <th>Movies<input name = "Movie" type = "checkbox"></th>
                            <th>Our Score<input name = "Our_score" type = "checkbox"></th>
                            <th>Rotten Tomatoes<input name = "Rotten" type = "checkbox"></th>
                            <th>Imdb<input name = "imdb" type = "checkbox"></th>
                        </form>
                    </thead>
                    <tbody>
                        {% for movie in movie_list %}
                            <tr>
                                <td>{{ movie.only_year }}</td>
                                <td><a href = "{% url 'MoviesDetail' movie.id %}">{{ movie.name }}</a></td>
                                <td>{{ movie.final_score }}</td>
                                <td>{{ movie.rotten_tomatoes }}</td>
                                <td>{{ movie.imdb }}</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>

            
        </div>

    </div>

    <div id = "bottom">
       
    </div> 
</div>


{% endblock %}

{% block scripts %}

{{ applied_filters|json_script:'applied_filters' }}
<script src = "{% static 'blog/js/jquery.js' %}"></script>
<script>
   
    var applied_filters = jQuery.parseJSON($("#applied_filters").text())
    var inputs = $("input");

    console.log(applied_filters)

    for (input of inputs)
    {
        for (filter of applied_filters)
        {
            if (input.name == filter)
            {
                console.log(input.name)
                $(input).prop("checked",true)
            }else{
                $(input).css("display","None")
            }
        }
    }

    for (input of inputs)
    {
        $(input).change(function(){
            console.log(this.name)
            this.form.submit()
        })
    } 
    
    
</script>

{% endblock %}